@model IEnumerable<Sport>
@using RPRO_SportSoft.Application;

@{
    ViewBag.Count = 1;
    ViewBag.Title = "Sportoviště";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Seznam sportovišť</h2>
@ViewBag.MyMessageToUser
    </br>
@{
    if (Session["Role"] == null)
    {
        Session["Role"] = "";
    }
    String role = Session["Role"].ToString();
    if (role.Equals("Owner"))
    {

        String r = Session["Role"].ToString();
        if (r.Equals("Owner"))
        {
            <p>
                @Html.ActionLink("Vytvořit nové sportoviště", "Create", new { boo = true, sport = "" })
            </p>
        }

        <table class="table">
            <tr>
                <th>
                    @*@Html.DisplayNameFor(model => model.Name)*@
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {

                <tr class="default">
                    <td>
                        @Html.DisplayFor(modelItem => item.Name)
                    </td>
                    @{
                        Image i = new ImagesApp().GetImage(item.Image_Id);
                        var base64 = Convert.ToBase64String(i.ImageBytes);
                        var imgsrc = string.Format("data:image/gif;base64,{0}", base64);
                    }
                    <td>

                        <img src='@imgsrc' width="25" height="25" />
                    </td>
                    <td>
                        @*  @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |*@
                        @Html.ActionLink("Rezervace", "Details", new { id = item.Id, date = (object)ViewBag.Date, count = 1, radio = "one" })
                        |
                        @Html.ActionLink("Správa kurtů", "CourtDetails", new { id = item.Id })

                        |
                        @Html.ActionLink("Upravit sportoviště", "Edit", new { id = item.Id })
                        @{  
                            String v = " | ";
                            SportsApp s = new SportsApp();
                            if (!s.CheckIfUsed(item.Id))
                            {
                                @v.ToString();
                                @Html.ActionLink("Vymazat sportoviště", "Delete", new { id = item.Id });
                            }
                        }

                        @*|
                            @Html.ActionLink("Vymazat", "Delete", new { id = item.Id })*@

                    </td>
                </tr>

                            }

        </table>
                            }
                            else
                            {
                                <table align="center">
                                    @foreach (var item in Model)
                                    {

                                        Image i = new ImagesApp().GetImage(item.Image_Id);
                                        var base64 = Convert.ToBase64String(i.ImageBytes);
                                        var imgsrc = string.Format("data:image/gif;base64,{0}", base64);
                                        <tr class="pics">
                                            @*<td>
                                                    <h3>@item.Name</h3>
                                                </td>*@
                                            <td>
                                                <a href="@Url.Action("Details", new { id = item.Id,date = (object)ViewBag.Date, count=1, radio = "one" })">
                                                    <img src='@imgsrc' width="200" height="200" />
                                                </a>
                                                <h3>@item.Name</h3>
                                            </td>
                                        </tr>
                                    }
                                </table>
                            }
}


<br />

<br />





