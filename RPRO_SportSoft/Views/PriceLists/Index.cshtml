@model IEnumerable<RPRO_SportSoft.PriceList>
@using RPRO_SportSoft.Application;

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Výpis ceníků</h2>
@{
    if (Session["Role"] == null)
    {
        Session["Role"] = "";
    }
    String r = Session["Role"].ToString();
    if (r.Equals("Owner"))
    {
<p>
    @Html.ActionLink("Vytvořit ceník", "Create")
</p>
    }
}

<table class="table">
    <tr class="default">
        <th>
           ID
        </th>
        <th>
            Popis
        </th>
        <th>
            Cena
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr class="default">
        <td>
            @Html.DisplayFor(modelItem => item.Id)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Price) Kč
        </td>
        <td>
            @{
                if (Session["Role"] == null)
                {
                    Session["Role"] = "";
                }
                String ro = Session["Role"].ToString();
                if (ro.Equals("Owner"))
                {
                    <p>
                      @{  String v = " |";
                          PriceListsApp pl = new PriceListsApp();
                          if (!pl.CheckForUsedPriceLists(item.Id)) {  @Html.ActionLink("Vymazat", "Delete", new { id = item.Id });
                              
                              @v.ToString();
                          }
                      } 
                          @Html.ActionLink("Upravit", "Edit", new { id = item.Id })
                    </p>

                }
            }
            
        </td>
        <td>

        </td>
            @*<td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
                </td>*@
</tr>
}

</table>
